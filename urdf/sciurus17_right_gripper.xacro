<?xml version="1.0"?>

<robot xmlns:xacro="http://ros.org/wiki/xacro">

  <xacro:macro name="sciurus17_right_gripper">

    <link name="${NAME_LINK_ARM_R_7}">
      <visual>
        <origin rpy="1.5708 0 0" xyz="0.0 0.0 0.0"/>
        <geometry>
          <mesh filename="package://sciurus17_description/meshes/visual/R_Link7.stl" scale="1.0 1.0 1.0"/>
        </geometry>
        <material name="${COLOR_LINK_GRIPPER}"/>
      </visual>
      <collision>
        <origin rpy="1.5708 0 0" xyz="0.0 0.0 0.0"/>
        <geometry>
          <mesh filename="package://sciurus17_description/meshes/collision/R_Link7.stl" scale="1.0 1.0 1.0"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="1.5708 0 0" xyz="-0.118e-03 -20.65e-03 1.006e-03"/>
        <inertia ixx="32600.928e-09" ixy="-69.84e-09" ixz="-254.224e-09" iyy="41969.484e-09" iyz="-409.16e-09" izz="43040.018e-09"/>
        <mass value="121.0e-03"/>
      </inertial>
    </link>

    <joint name="${NAME_JOINT_GRIPPER_R_A}" type="revolute">
      <parent link="${NAME_LINK_ARM_R_7}" />
      <child link="${NAME_LINK_GRIPPER_R_A}" />
      <origin xyz="0.012 -0.024 0.0" rpy="0 0 0"/>
      <limit 
        lower="${JOINT_GRIPPER_R_LOWER_LIMIT}" 
        upper="${JOINT_GRIPPER_R_UPPER_LIMIT}" 
        effort="${EFFORT_LIMIT}" 
        velocity="${VELOCITY_LIMIT}"/>
      <axis xyz="0 0 1"/>
      <dynamics damping="1.0e-6" friction="0.8"/>
    </joint>

    <link name="${NAME_LINK_GRIPPER_R_A}">
      <visual>
        <!--origin rpy="3.14159 0 0" xyz="0.0 0.0 0.0"/-->
        <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
        <geometry>
          <mesh filename="package://sciurus17_description/meshes/visual/R_GripperA.stl" scale="1.0 1.0 1.0"/>
        </geometry>
        <material name="${COLOR_LINK_GRIPPER}"/>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
        <geometry>
          <mesh filename="package://sciurus17_description/meshes/collision/R_GripperA.stl" scale="1.0 1.0 1.0"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0 0 0" xyz="2.649e-03 -26.849e-03 3.757e-03"/>
        <inertia ixx="10192.75e-09" ixy="-197.895e-09" ixz="98.609e-09" iyy="5023.728e-09" iyz="-554.407e-09" izz="6322.202e-09"/>
        <mass value="15.8e-03"/>
      </inertial>
    </link>

    <!--Dummy joint/link to prevent error with mimic joint
    See https://github.com/ros-controls/gazebo_ros2_control/issues/173
    -->
    <joint name="${NAME_JOINT_GRIPPER_R_B}_mimic" type="fixed">
      <parent link="world" />
      <child link="dummy_mimic_fix_r" />
    </joint>
    <link name="dummy_mimic_fix_r"/>

    <joint name="${NAME_JOINT_GRIPPER_R_B}" type="revolute">
      <parent link="${NAME_LINK_ARM_R_7}" />
      <child link="${NAME_LINK_GRIPPER_R_B}" />
      <origin xyz="-0.012 -0.024 0.0" rpy="0 0 0"/>
      <limit 
        lower="${JOINT_GRIPPER_R_LOWER_LIMIT}" 
        upper="${JOINT_GRIPPER_R_UPPER_LIMIT}" 
        effort="${EFFORT_LIMIT}" 
        velocity="${VELOCITY_LIMIT}"/>
      <axis xyz="0 0 -1"/>
      <mimic joint="${NAME_JOINT_GRIPPER_R_A}" multiplier="1" offset="0"/>
      <dynamics damping="1.0e-6" friction="0.8"/>
    </joint>

    <link name="${NAME_LINK_GRIPPER_R_B}">
      <visual>
        <!-- origin rpy="3.14159 0 0" xyz="0.0 0.0 0.0"/ -->
        <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
        <geometry>
          <mesh filename="package://sciurus17_description/meshes/visual/R_GripperB.stl" scale="1.0 1.0 1.0"/>
        </geometry>
        <material name="${COLOR_LINK_GRIPPER}"/>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
        <geometry>
          <mesh filename="package://sciurus17_description/meshes/collision/R_GripperB.stl" scale="1.0 1.0 1.0"/>
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0 0 0" xyz="-2.707e-03 -30.901e-03 2.845e-03"/>
        <inertia ixx="7483.7e-09" ixy="361.283e-09" ixz="-63.385e-09" iyy="4088.581e-09" iyz="-228.226e-09" izz="4372.991e-09"/>
        <mass value="13.9e-03"/>
      </inertial>
    </link>

  </xacro:macro>

</robot>
